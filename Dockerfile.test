# Test Dockerfile with explicit port handling
FROM python:3.9-slim

WORKDIR /app

COPY requirements-minimal.txt requirements.txt
RUN pip install -r requirements.txt

COPY main_debug.py main.py

# Create startup script
RUN echo '#!/bin/bash\necho "Starting app with PORT=$PORT"\nexec uvicorn main:app --host 0.0.0.0 --port $PORT --log-level info' > /app/start.sh
RUN chmod +x /app/start.sh

CMD ["/app/start.sh"]